<template>
  <div class="sidebar-wrapper" :class="value?'expand':'collapse'">
    <div class="sidebar-scroller" :style="{'padding-left': width}">
      <div class="sidebar-main" :style="{width: width}">
        <slot></slot>
      </div>
      <div class="touch-toggle" :style="{'padding-left': width}" @click.stop.prevent="toggleClick"></div>
    </div>
  </div>
</template>

<script>

  export default {
    props: {
      value: {
        'type': Boolean,
        'default': false
      },
      width: {
        'type': String,
        'default': '300px'
      }
    },
    data() {
      return {}
    },
    methods: {

      /**
       * 点击 sidebar 阴影部分收起 sidebar
       *
       * @param {Event} e 原生点击事件
       */
      toggleClick(e) {
        this.$emit('input', false)
      }
    }
  }

</script>

<style lang="stylus" scoped>
  .sidebar-wrapper
    z-index 9999

    .sidebar-main
      overflow-y auto
      overflow-x hidden
      box-sizing border-box
      z-index 25
      display none
      background #fff
      height 0
      top 0

    .touch-toggle
      position fixed
      top 0
      bottom 0
      left 0
      width 0
      z-index 100
      opacity 0
      transition opacity .3s

    &.collapse
      margin-top 0 !important
      .sidebar-scroller
        padding-left 0 !important
      .touch-toggle
        padding-left 0 !important
        top 64px

    &.expand
      position fixed
      top 0
      right 0
      bottom 0
      left 0
      z-index 150
      overflow hidden
      box-shadow 0 2px 4px -1px rgba(0, 0, 0, .2), 0 4px 5px rgba(0, 0, 0, .14), 0 1px 10px rgba(0, 0, 0, .12)

      .sidebar-scroller
        width 100%
        height 100%
        white-space nowrap
        position relative
        box-sizing content-box

        .sidebar-main
          display block
          height 100%
          position absolute
          top 0
          right auto
          bottom 0
          left 0
          overflow auto
  
        .touch-toggle
          position static
          width 100%
          height 100%
          background #212121
          opacity .5

</style>
